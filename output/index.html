<!DOCTYPE html>
<html lang="zh">
<head>

        <title>荒野丛林</title>
        <meta charset="utf-8" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="/theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="/theme/pygment.css" />

        <script src="/theme/js/libs/modernizr-2.6.2.min.js"></script>






</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="">荒野丛林 <strong></strong></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="">Home</a></li>


              </ul>
            </div>

<section id="content">



   <div class="row">


        <div class="eleven columns">
		         <ol id="post-list">
				        <li><article class="hentry">
				                <header> <h2 class="entry-title"><a href="/gdbdiao-shi-ji-qiao-bi-ji.html" rel="bookmark" title="Permalink to gdb调试技巧笔记">gdb调试技巧笔记</a></h2> </header>
				                <footer class="post-info">
				                    <abbr class="published" title="2013-12-15T00:00:00"> 日 15 十二月 2013 </abbr>
<address class="vcard author">By <a class="url fn" href="/author/walter.html">Walter</a></address>				                </footer><!-- /.post-info -->
				                <div class="entry-content"> <p>GDB最基本的几条调试命令不需要再记录。记录些稍微高级点的特性。</p>
<div class="highlight"><pre><span class="mf">1.</span> <span class="err">调试带参数的程序</span>
</pre></div>


<p>在使用gdb调试带参数的程序时，可以使用--args选项。</p>
<div class="highlight"><pre><span class="mf">2.</span> <span class="n">GDB</span><span class="err">调试宏。</span><span class="n">C</span><span class="err">代码在预处理后，宏会被替换，导致在调试最终的可执行文件时，无法找到宏定义。</span>
</pre></div>


<p>gdb编译时，打开-g开关，可以生成调试信息。其实，-g也是有级别(level)的。-g1包含非常少的
调试信息，包含函数及外部变量信息，但是没有行号及局部变量信息。-g2为默认级别，包含行号等
信息。-g3包含更多的信息，比如程序中出现的宏定义信息。macro expand命令和扩展宏，对于调试宏
非常有帮助。可是使用print显示宏替换过后的值，如果宏里面包含有编译时语句，则无法显示出值，比如
宏定义中有static_assert(C11特性,GNU扩展为_Static_assert）。</p>
<div class="highlight"><pre><span class="n">localhost</span> <span class="n">tools</span> <span class="err">#</span> <span class="n">gdb</span> <span class="o">--</span><span class="n">args</span> <span class="p">.</span><span class="o">/</span><span class="n">kmod</span> <span class="o">-</span><span class="n">V</span>
<span class="n">GNU</span> <span class="n">gdb</span> <span class="p">(</span><span class="n">Gentoo ...</span></pre></div> </div><!-- /.entry-content -->

								<div class="medium primary btn"><a href="/gdbdiao-shi-ji-qiao-bi-ji.html" rel="bookmark" title="Permalink to gdb调试技巧笔记">Read more <i class="icon-arrow-right"></i></a></div>



								<div class="row tag-row">
								</div>



				        </article></li>
				        <li><article class="hentry">
				                <header> <h2 class="entry-title"><a href="/kmodyuan-ma-yue-du-bi-ji.html" rel="bookmark" title="Permalink to kmod源码阅读笔记">kmod源码阅读笔记</a></h2> </header>
				                <footer class="post-info">
				                    <abbr class="published" title="2013-12-14T00:00:00"> 六 14 十二月 2013 </abbr>
<address class="vcard author">By <a class="url fn" href="/author/walter.html">Walter</a></address>				                </footer><!-- /.post-info -->
				                <div class="entry-content"> <p>kmod<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup>是处理Linux内核模块的一系列工具集,可以插入，删除，显示，检查属性，解决模块依赖和创建别名。
取代了module-init-tools。</p>
<h1>程序起始及命令行参数处理</h1>
<p>首先看main函数:</p>
<div class="highlight"><pre><span class="nb">int</span> <span class="n">main</span><span class="p">(</span><span class="nb">int</span> <span class="n">argc</span><span class="p">,</span> <span class="n">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="nb">int</span> <span class="n">err</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">program_invocation_short_name</span><span class="p">,</span> <span class="s">&quot;kmod&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">err</span> <span class="o">=</span> <span class="n">handle_kmod_commands</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
    <span class="k">else</span>
        <span class="n">err</span> <span class="o">=</span> <span class="n">handle_kmod_compat_commands</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">err</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>program_invocation_short_name是GNU扩展,表示执行程序时，程序的名称(不包含路径信息)。还有一个
program_invocation_name表示程序的全部名称（包含路径信息），等价于argv[0]。program_invocation_name
使用起来比较方便，不需要硬生生的使用argv[0]。通过man
program_invocation_name可以查看相关信息 ...</p> </div><!-- /.entry-content -->

								<div class="medium primary btn"><a href="/kmodyuan-ma-yue-du-bi-ji.html" rel="bookmark" title="Permalink to kmod源码阅读笔记">Read more <i class="icon-arrow-right"></i></a></div>



								<div class="row tag-row">
								</div>



				        </article></li>
				        <li><article class="hentry">
				                <header> <h2 class="entry-title"><a href="/kai-shi-xie-bo-ke.html" rel="bookmark" title="Permalink to 开始写博客">开始写博客</a></h2> </header>
				                <footer class="post-info">
				                    <abbr class="published" title="2013-10-09T00:00:00"> 三 09 十月 2013 </abbr>
<address class="vcard author">By <a class="url fn" href="/author/walter.html">Walter</a></address>				                </footer><!-- /.post-info -->
				                <div class="entry-content"> <p>开始使用pelican写博客，托管在github上。</p> </div><!-- /.entry-content -->

								<div class="medium primary btn"><a href="/kai-shi-xie-bo-ke.html" rel="bookmark" title="Permalink to 开始写博客">Read more <i class="icon-arrow-right"></i></a></div>



								<div class="row tag-row">
								</div>



				        </article></li>
				</ol><!-- /#posts-list -->

        </div><!-- /.eleven.columns -->
        
<div class="three columns">

<h4>Pages</h4>

 <ul>
  </ul>

<h4>Categories</h4>
<ul>
		<li><a href="/category/2013-12.html">2013-12</a></li>
		<li><a href="/category/misc.html">misc</a></li>
</ul>


<h4>Tags</h4>



</div> </div><!-- /.row -->

<p class="paginator">
    Page 1 / 1
</p>
</section><!-- /#content -->

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">

    
        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">





              </ul>
            </div>
          </div>
        </footer>

    </div>


  <script src="/theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="/theme/js/libs/gumby.min.js"></script>
  <script src="/theme/js/plugins.js"></script>

</body>
</html>